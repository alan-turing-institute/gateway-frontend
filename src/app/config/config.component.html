<div class="container-fluid">

  <div *ngIf="type!='Output'" class="row">
    <div class="col-md-12">
      <tabset>

        <tab heading={{case.label}}>
          <div class="row">
            <div class="col-md-2">
              <img src={{case.thumbnail}} class=img-config>
            </div>
            <div class="col-md-8">
              <p class="descriptionText">{{case.description}}</p>
            </div>
            <div class="col-md-2">
              <div class="row">
                 <div class="col-md-12">
                  <button type="button" class="btn btn-primary btn-action" (click)="saveJob()" [disabled]=!validFormValues>
                    <span><strong>Save</strong></span>
                  </button>
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <!-- <button type="button" class="btn btn-primary" (click)="startJob()" [disabled]=!validFormValues  [hidden]=!jobCreated> -->
                  <button type="button"
                          class="btn btn-primary btn-action"
                          [routerLink]="['../../dashboard']"
                          routerLinkActive="active"
                          (click)="startJob()" [disabled]=!validFormValues>
                    <span><strong>Send Job</strong></span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </tab>

        <tab heading='Description'>
          <div class = "row">
            <div class="col-md-2">
              <img src={{case.thumbnail}} class=img-config>
            </div>
            <div class="col-md-8">
              <div class="form-group">
              <label>Name:</label>
              <input type="text"
              class="form-control"
              [(ngModel)]="job.name"
              (keyup.enter)="updateName(job.name)">
            </div>
            <div class="form-group">
              <label>Description:</label>
              <textarea
              rows = "5"
              class="form-control"
              [(ngModel)]=job.description
              (keyup.enter)="updateDescription(job.description)"></textarea>
            </div>
            </div>

          <div class="col-md-2">
            <div class="row">
               <div class="col-md-12">
                <button type="button" class="btn btn-primary btn-action" (click)="saveJob()" [disabled]=!validFormValues>
                  <span><strong>Save</strong></span>
                </button>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <!-- <button type="button" class="btn btn-primary" (click)="startJob()" [disabled]=!validFormValues  [hidden]=!jobCreated> -->
                <button type="button"
                        class="btn btn-primary btn-action"
                        [routerLink]="['../../dashboard']"
                        routerLinkActive="active"
                        (click)="startJob()" [disabled]=!validFormValues>
                  <span><strong>Send Job</strong></span>
                </button>
              </div>
            </div>
          </div>
        </div>
        </tab>
        <!-- <tab heading="Job Information">
          <div class="row">
            <div class="col-md-2">
              <img src={{case.thumbnail}} class=img-job>
            </div>
          <div class="col-md-10">
            <p class="descriptionText">Status: {{job.status}}</p>
            <p class="descriptionText">Start: {{job.start_datetime}} </p>
            <p class="descriptionText">End: {{job.start_datetime}}</p>
          </div>
          </div>
      </tab> -->
      </tabset>
    </div>
  </div>


  <p></p>
  <div class="row">
    <div class="col-md-12">
      <div class="card-header">
        <strong>Configuration</strong>
      </div>
      <div class = "card">
      <div [attr.id]="componentFamilyAccordion" role="tablist">
        <div *ngFor="let tag of tags" class="card card-family" >
          <div class="card-header config" role="tab" (click)="toggleCollapse(tag)">
            <h5 class="mb-0">
              <a data-toggle="collapse" data-target={{getDataTarget(tag)}} data-parent="#componentFamilyAccordion">
                {{tag.label}}
              </a>
            </h5>
          </div>
          <div [attr.id]=tag.name [ngClass]="{'collapse': tag.collapse }"role="tabpanel">
            <div class="card-block">
              <div *ngFor="let component of getVisibleComponents(tag)">
                <div *ngIf="component.type == 'text'">
                  <label [for]=component.name>{{component.label}} <span [hidden]="component.valid" [ngClass]="{'invalidValue': component.valid === false}">*Valid values ranges between {{component.min_value}} and {{component.max_value}}</span>
                  </label>
                  <div class="input-group"  >
                    <input
                      [(ngModel)]="component.value"
                      (ngModelChange) = "validateValue(component)"
                      [attr.id]="component.name"
                      type="number"
                      [ngClass]="{'invalidValue': component.valid === false}"
                      (keyup.enter)="update(tag,component)"
                      (blur)="update(tag, component)"
                      [disabled]="isDisabled()"
                    >
                    <span class="input-group-addon">{{component.units}}</span>
                  </div>

                </div>

                <div *ngIf="component.type == 'radio'">
                  <label class="switch switch-3d switch-danger">
                    <input type="checkbox"
                      class="switch-input"
                      [ngModel] = "component.value"
                      (ngModelChange)="update(tag, component)"
                      [disabled]="isDisabled()">
                    <span class="switch-label"></span>
                    <span class="switch-handle"></span>
                  </label>
                  {{component.units}}
                </div>

                <div *ngIf="component.type == 'slider'">
                  <label [for]=component.name>{{component.label}}</label>
                  <ion-range-slider
                    [attr.id]=component.name
                    from={{component.value}}
                    min={{component.min_value}}
                    max={{component.max_value}}
                    postfix=" {{component.units}}"
                    data-step=0.01
                    (onFinish)="updateSlider(tag, component, $event)"
                    [disable]="isDisabled()">
                  </ion-range-slider>
                </div>

                <div *ngIf="component.type == 'vtk'">
                  <label [for]=component.name>{{component.label}}</label>
                  <ion-range-slider
                    [attr.id]=component.name
                    from={{component.value}}
                    min={{component.min_value}}
                    max={{component.max_value}}
                    postfix=" {{component.units}}"
                    data-step=0.01
                    [disable]="isDisabled()"
                    (onFinish)="updateSlider(tag, component, $event)">
                  </ion-range-slider>
                  <app-pipe [radius]="component.value"></app-pipe>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      </div>
    </div>

  </div>
</div>
